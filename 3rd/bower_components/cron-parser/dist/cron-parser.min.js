!function(t,e){var n=e();"undefined"!=typeof module&&module.exports&&(module.exports=n),"undefined"!=typeof window&&this===window&&(window.CronParser=n)}(this,function(){"use strict";function t(t){for(var e=t?new Date(t):new Date,r=Object.keys(n),i=0,s=r.length;s>i;i++){var a=r[i];e[a]=n[a].bind(e)}return e}var e,n={addYear:function(){this.setFullYear(this.getFullYear()+1)},addMonth:function(){this.setDate(1),this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMonth(this.getMonth()+1)},addDay:function(){var t=this.getDate();this.setDate(t+1),this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.getDate()===t&&this.setDate(t+2)},addHour:function(){var t=this.getHours();this.setHours(t+1),this.getHours()===t&&this.setHours(t+2),this.setMinutes(0),this.setSeconds(0)},addMinute:function(){this.setMinutes(this.getMinutes()+1),this.setSeconds(0)},addSecond:function(){this.setSeconds(this.getSeconds()+1)},toUTC:function(){var e=new t(this),n=e.getTime()+6e4*e.getTimezoneOffset();return e.setTime(n),e}};!function(){Number.isNaN=Number.isNaN||function(t){return"number"==typeof t&&t!==t},e=function(n,r){this._options=r,this._currentDate=new t(r.currentDate),this._endDate=r.endDate?new t(r.endDate):null,this._fields={},this._isIterator=r.iterator||!1,this._hasIterated=!1,this._utc=r.utc||!1;for(var i=0,s=e.map.length;s>i;i++){var a=e.map[i];this._fields[a]=n[i]}},e.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"],e.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"},e.constraints=[[0,59],[0,59],[0,23],[1,31],[1,12],[0,7]],e.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],e.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},e.parseDefaults=["0","*","*","*","*","*"],e._parseField=function(t,n,r){function i(e){function n(e){var n=i.length>0?Math.max.apply(Math,i):-1;if(e instanceof Array)for(var s=0,a=e.length;a>s;s++){var o=e[s];if(o<r[0]||o>r[1])throw new Error("Constraint error, got value "+o+" expected range "+r[0]+"-"+r[1]);o>n&&i.push(o),n=Math.max.apply(Math,i)}else{if(e=+e,e<r[0]||e>r[1])throw new Error("Constraint error, got value "+e+" expected range "+r[0]+"-"+r[1]);"dayOfWeek"==t&&(e%=7),e>n&&i.push(e)}}var i=[],a=e.split(",");if(a.length>1)for(var o=0,h=a.length;h>o;o++)n(s(a[o]));else n(s(e));return i}function s(t){var e=1,n=t.split("/");return n.length>1?a(n[0],n[n.length-1]):a(t,e)}function a(t,e){var n=[],i=t.split("-");if(i.length>1){if(i.length<2||!i[0].length)return+t;var s=+i[0],a=+i[1];if(Number.isNaN(s)||Number.isNaN(a)||s<r[0]||a>r[1])throw new Error("Constraint error, got range "+s+"-"+a+" expected range "+r[0]+"-"+r[1]);if(s>=a)throw new Error("Invalid range: "+t);var o=+e;if(Number.isNaN(o)||0>=o)throw new Error("Constraint error, cannot repeat at every "+o+" time.");for(var h=s,u=a;u>=h;h++)o>0&&o%e===0?(o=1,n.push(h)):o++;return n}return+t}switch(t){case"month":case"dayOfWeek":var o=e.aliases[t];n=n.replace(/[a-z]{1,3}/gi,function(t){if(t=t.toLowerCase(),void 0!==typeof o[t])return o[t];throw new Error('Cannot resolve alias "'+t+'"')})}if(!/^[\d|/|*|\-|,]+$/.test(n))throw new Error("Invalid characters, got value: "+n);return-1!==n.indexOf("*")&&(n=n.replace(/\*/g,r.join("-"))),i(n)},e.prototype._findSchedule=function(){function n(t,e){for(var n=0,r=e.length;r>n;n++)if(e[n]>=t)return e[n]===t;return e[0]===t}function r(t,e){return t instanceof Array&&!t.length?!1:2!==e.length?!1:t.length===e[1]-(e[0]<1?-1:0)}var i=function(t){return this._utc?"getUTC"+t.slice(3):t}.bind(this),s=new t(this._currentDate),a=this._endDate;for(this._fields.second.length>1&&!this._hasIterated&&s.addSecond();;){if(a&&a.getTime()-s.getTime()<0)throw new Error("Out of the timespan range");var o=n(s[i("getDate")](),this._fields.dayOfMonth),h=n(s[i("getDay")](),this._fields.dayOfWeek),u=r(this._fields.dayOfMonth,e.constraints[3]),f=r(this._fields.month,e.constraints[4]),d=r(this._fields.dayOfWeek,e.constraints[5]);if(!f){var l=s[i("getFullYear")](),c=s[i("getMonth")]()+1,p=1===c?11:c-1,g=e.daysInMonth[p-1],v=this._fields.dayOfMonth[this._fields.dayOfMonth.length-1],y=g,m=v,w=!(l%4||!(l%100)&&l%400);if(w&&(y=29,m=29),this._fields.month[0]===p&&m>y)throw new Error("Invalid explicit day of month definition")}if(o&&h)if(u||!d||o)if(!u||d||h)if(u&&d||o||h)if(n(s[i("getMonth")]()+1,this._fields.month))if(n(s[i("getHours")](),this._fields.hour))if(n(s[i("getMinutes")](),this._fields.minute)){if(n(s[i("getSeconds")](),this._fields.second))break;s.addSecond()}else s.addMinute();else s.addHour();else s.addMonth();else s.addDay();else s.addDay();else s.addDay();else s.addDay()}var _=new t(s);return this._currentDate!==s&&_.addSecond(),this._currentDate=_,this._hasIterated=!0,s},e.prototype.next=function(){var t=this._findSchedule();return this._isIterator?{value:t,done:!this.hasNext()}:t},e.prototype.hasNext=function(){var t=this._currentDate;try{return this.next(),!0}catch(e){return!1}finally{this._currentDate=t}},e.prototype.iterate=function(t,e){for(var n=[],r=0,i=t;i>r;r++)try{var s=this.next();n.push(s),e&&e(s,r)}catch(a){break}return n},e.prototype.reset=function(){this._currentDate=new t(this._options.currentDate)},e.parse=function n(r,i,s){function n(n,r){r||(r={}),r.currentDate||(r.currentDate=new t),e.predefined[n]&&(n=e.predefined[n]);for(var i=[],s=n.split(" "),a=e.map.length-s.length,o=0,h=e.map.length;h>o;++o){var u=e.map[o],f=s[s.length>h?o:o-a];a>o||!f?i.push(e._parseField(u,e.parseDefaults[o],e.constraints[o])):i.push(e._parseField(u,f,e.constraints[o]))}return new e(i,r)}return"function"==typeof i&&(s=i,i={}),n(r,i)}}();var r;return function(){r=function(){},r._parseEntry=function(t){var n=t.split(" ");if(6===n.length)return{interval:e.parse(t)};if(n.length>6)return{interval:e.parse(t),command:n.slice(6,n.length)};throw new Error("Invalid entry: "+t)},r.parseExpression=function(t,n,r){return e.parse(t,n,r)},r.parseString=function(t){for(var e=this,n=t.split("\n"),r={variables:{},expressions:[],errors:{}},i=0,s=n.length;s>i;i++){var a=n[i],o=null,h=a.replace(/^\s+|\s+$/g,"");if(h.length>0){if(h.match(/^#/))continue;if(o=h.match(/^(.*)=(.*)$/))r.variables[o[1]]=o[2];else{var u=null;try{u=e._parseEntry("0 "+h),r.expressions.push(u.interval)}catch(f){r.errors[h]=f}}}}return r},r.parseFile=function(t,e){require("fs").readFile(t,function(t,n){return t?void e(t):e(null,r.parseString(n.toString()))})}}(),r});
//# sourceMappingURL=cron-parser.min.js.map